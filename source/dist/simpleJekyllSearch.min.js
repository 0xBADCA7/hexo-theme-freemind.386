(function(a){a.fn.simpleJekyllSearch=function(l){var c=a.extend({jsonFile:"./search.json",jsonFormat:"title,category,desc,url,date",template:'<a href="{url}" title="{title}">{title}</a>',searchResults:".results",searchResultsTitle:"<h4>Search results</h4>",limit:"10",noResults:"<p>Oh shucks<br/><small>Nothing found :(</small></p>"},l);var f=c.jsonFormat.split(",");var i=[],d=this,b=a(c.searchResults);if(c.jsonFile.length&&b.length){a.ajax({type:"GET",url:c.jsonFile,dataType:"html",success:function(n,o,m){if(k(n)){g()}else{console.log("the properties do not match the keys of the JSON file")}},error:function(m,o,n){console.log("error")}})}function k(p){i=a.parseJSON(p);var m="",n=true,q=0;for(var o in i[0]){if(o!==f[q]){n=false;break}q++}return n}console.log(a(this));console.log(this);function g(){d.keyup(function(m){if(a(this).val().length){h(j(a(this).val()))}else{e()}})}function j(n){var m=[];a.each(i,function(o,p){for(var o=0;o<f.length;o++){if(p[f[o]]!==undefined&&p[f[o]].toLowerCase().indexOf(n.toLowerCase())>1){m.push(p);o=f.length}}});return m}function h(n){e();b.append(a(c.searchResultsTitle));if(n.length){a.each(n,function(o,q){if(o<c.limit){var m=c.template;for(var o=0;o<f.length;o++){var p=new RegExp("{"+f[o]+"}","g");m=m.replace(p,q[f[o]])}b.append(a(m))}})}else{b.append(c.noResults)}}function e(){b.children().remove()}}}(jQuery));